import schedule
import time
from vulnerability_scanner import check_for_vulnerabilities
from patch_manager import patch_vulnerabilities
from utils import log_vulnerability, generate_report

# 예제 소프트웨어 목록
software_list = ['apache', 'nginx', 'openssl']

def scan_and_patch():
    vulnerabilities = check_for_vulnerabilities(software_list)
    for vulnerability in vulnerabilities:
        success = patch_vulnerabilities([vulnerability])
        log_vulnerability(vulnerability, success)

schedule.every().day.at("02:00").do(scan_and_patch)

if __name__ == "__main__":
    while True:
        schedule.run_pending()
        time.sleep(1)
